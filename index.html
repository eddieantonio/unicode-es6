<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Unicode! (And how ES6 can help)</title>

    <meta name="author" content="Eddie Antonio Santos">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!-- Bodge some CSS in here. -->
    <style>
      .reveal code {
        text-transform: none;
      }

      .reveal img.no-border {
        border: 0;
        box-shadow: none;
        margin: 0;
        background: none;
      }

      img.bitter-logo {
        max-height: initial;
        max-width: 75%;
      }

      h2.halo {
        color: black;
        text-shadow: -0.1em -0.1em 1em rgba(255,255,255,1), 1em 0 1em rgba(255,255,255,1), -0.1em 0 1em rgba(255,255,255,1), -0.3em 0.3em 1em rgba(255,255,255,1), -0.3em -0.1em 1em rgba(255,255,255,1);
      }
    </style>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>Unicode!</h1>
          <h2>(And how ES6 can help)</h2>
          <p>
            <small> By
                <a href="//www.eddieantonio.ca/">Eddie Antonio Santos</a>
                /
                <a href="http://twitter.com/_eddieantonio"> @_eddieantonio </a>
               </small>
          </p>
        </section>

        <section>
          <section>
            <h2 class="fancy"> (Hypothetical Scenario) </h2>

            <aside class="notes" data-markdown>
              - Tomorrow you get hired for a start-up
              - Our visionary CEO has decided that the internet needs a place to
                share its feelings because the intenet has a lot of feelings.
            </aside>
          </section>


          <section>
            <img src="./img/feelings.gif" alt="">
            <aside class="notes" data-markdown>
              - But that's okay; we have a lot of feelings too, so
                the intenet has a lot of feelings.
            </aside>
          </section>

          <section>
            <img src="./img/bitter-standard.png" alt="bitter" class="no-border bitter-logo">

            <p>
              <small> (Thanks, <a href="http://kimber.github.io/">Kim</a>!) </small>
            </p>
          </section>

            <aside class="notes" data-markdown>
              - So this app is called Bitter.
              - It allows you to post short, 140 character long messages.
              - Pretty simple, right?
              - I mean, we have feelings too, but with the right app, our
              animated gif will resemble this instead:
            </aside>

          <section data-background="./img/feelings-money.gif">
            <aside class="notes" data-markdown>
              - With that in mind, let's code it!
              - Ensure Bitter is loaded in a browser window
              - Ensure src/index.jsx is loaded in Vim
              - Demo the app -- type some stuff in it.
              - `node -e 'console.log("üò≠".repeat(140))' | pbcopy`
              - Delete some things to demonstrate counting by two.
            </aside>
          </section>

          <section>
            <h2> (demo) </h2>
          </section>
        </section>

        <section>
          <section>
            <h2>
               What does <code>str.length</code> actually measure?
            </h2>
            <p class="fragment"> Let's consult the <a
                href="http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types-string-type">standard</a>!
            </p>
          </section>

          <section>
            <blockquote>
              <p> The String type is the set of all ordered sequences of zero
                or more <strong>16-bit unsigned integer values</strong>
                (‚Äúelements‚Äù) ...

              <p class="fragment">The String type is generally used to
                represent textual data in a running ECMAScript program, in
                which case each element in the String is treated as a
                <strong>UTF-16 code unit</strong> value.

              <p class="fragment"> The length of a String is the
                <strong>number</strong> of elements (i.e., <strong>16-bit
                  values</strong>) within it.</p>
              </blockquote>
            </section>

          <section>
            <h2> What the üëø is a UTF-16 code value‚ÄΩ </h2>
          </section>

        </section>

        <!-- What is a JavaScript String anyway? -->

        <section>
          <section>
            <h1> Unicode! </h1>
          </section>

          <section>
            <h1> What is Unicode? </h1>
            <ul>
              <li class="fragment"> A list of numbers (<em>code points</em>) that map to each character. Ever. </li>
              <li class="fragment"> Database of properties for each code point (e.g., name, general category). </li>
              <li class="fragment"> <del>a character encoding</del>
                <span class="fragment"> It's several character encodings! </span>
              </li>
              <li class="fragment"> a consortium! </li>
            </ul>
            <aside class="notes" data-markdown>
              - Unicode is a lot of things.
              - It's the database of characters (among other things).
              - Characters are abstract representations of the smallest units
                of written semantic value in written language
                [Unicode:3](http://www.unicode.org/versions/Unicode8.0.0/ch02.pdf).
              - If you're dealing with text, you're most likely dealing with Unicode
              - Unicode is NOT a character encodings. That is, Unicode does
                not specify a single way to turn code points into binary for
                transmission, and storage. It defines several such formats,
                including UTF-8, and what JavaScript uses, UTF-16.
            </aside>
          </section>

          <section>
            <h2> Code Points </h2>
            <p> Unique number given to each character </p>
            <!-- insert some example code points -->

            <p class="fragment"> Range from 0 to 10FFFF<sub>16</sub> </p>

            <div class="fragment">
              <p> 1,114,112 code points available in total </p>

              <p> <small>(See <a href="http://www.unicode.org/versions/Unicode8.0.0/ch02.pdf">Unicode Chapter 3</a>)</small> </p>
            </div>
          </section>


          <section>
            <h2> Code Unit </h2>
            <p> One unit </p>
          </section>

          <section>
            <h2> Ways of transmitting code points </h2>

            <ul>
              <li class="fragment"> UTF-8 </li>
              <li class="fragment"> UTF-16 </li>
            </ul>

            <p class="fragment"> <em>Later...</em> </p>

            <ul>
              <li class="fragment"> UTF-7 </li>
              <li class="fragment"> UTF-32 </li>
            </ul>

            <aside class="notes" data-markdown>
              - At this point, things should seem odd.
              - Why does UTF-32 exist, and why does JavaScript use UTF-16?
            </aside>
          </section>

          <section>
            <h2> It requires 21 bits to store any given Unicode code point </h2>
          </section>
        </section>

        <section>
          <section>
            <h1> A tour of the Unicode character space! </h1>
          </section>

          <section data-background="./img/some-astral-ass-shit.jpg">
            <h2 class="halo"> UTF-16 needs <strong>two code units</strong> to represent <strong>one astral code point</strong> </h2>

            <aside class="notes" data-markdown>
              - UTF-16 does this through *surrogate pairs*, but let's just leave
                that discussion for another time...
            </aside>
          </section>

          <section>
            BMP + Weird üí©
          </section>
        </section>

        <section>
          <section>
            <h2> Back to our problem... </h2>
            <p> We want to count
              <strong> code points </strong>
              not
              <strong> code units </strong>
            </p>
          </section>

          <section>
            <h2>Enter: </h2>
            <h3><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-string.prototype-@@iterator"><code>String.prototype[@@iterator]</code></a></h3>

            <p class="fragment">
              <small>(<code>String.prototype.codePointAt()</code> exists too)</small>
            </p>

            <aside class="notes" data-markdown>
              - among the slew of new features ES6 introduced are iterators
              - The one for String iterates through code points!
            </aside>
          </section>

          <section>
            <blockquote>
              When the @@iterator method is called it returns an Iterator
              object (<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-iterator-interface">25.1.1.2</a>)
              that <strong>iterates over the code points</strong> of a String
              value, returning each code point as a String value.
            </blockquote>
          </section>

          <section>
            <h2>Compare</h2>
            <pre><code data-trim>
for (var i = 0; i &lt; str.length; i++) {
  console.log(s[i]);
}
            </code></pre>

            <h3>vs.</h3>

            <pre><code data-trim>
for (var c of s) {
  console.log(c);
}
            </code></pre>

            <aside data-markdown class="notes">
              - it's not just prettier; it iterates completely differently.
            </aside>
          </section>

          <section>
            <h2> Let's fix our code! </h2>

            <p class="fragment"> Trick: Use <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-array.from">Array#from</a> </p>
          </section>
        </section>

      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>
  </body>
</html>
